#pragma checksum "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "c876799538d1a6961401061de8093a817f9b8137"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Supplier_index), @"mvc.1.0.view", @"/Views/Supplier/index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\RohitGit\Shopper\Supplier\Views\_ViewImports.cshtml"
using Supplier;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\RohitGit\Shopper\Supplier\Views\_ViewImports.cshtml"
using Supplier.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"c876799538d1a6961401061de8093a817f9b8137", @"/Views/Supplier/index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"47fd70e81a9975605f7808c5a6d1ae49a972d3e9", @"/Views/_ViewImports.cshtml")]
    public class Views_Supplier_index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<Entities.ActiveOrder>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\n<script src=\"https://code.jquery.com/jquery-3.4.1.min.js\" crossorigin=\"anonymous\"></script>\n<script");
            BeginWriteAttribute("src", " src=\"", 141, "\"", 222, 2);
            WriteAttributeValue("", 147, "https://cdn.jsdelivr.net/npm/", 147, 29, true);
            WriteLiteral("@");
            WriteAttributeValue("", 178, "aspnet/signalr@1.1.2/dist/browser/signalr.js", 178, 44, true);
            EndWriteAttribute();
            WriteLiteral("></script>\n\n<h1>Open Orders</h1>\n<input type=\"button\" id=\"btnRefresh\" value=\"Refresh\"  class=\"btn btn-primary\" /> \n<p>\n\n</p>\n<table class=\"table\">\n    <thead>\n        <tr>\n            <th>\n                ");
#nullable restore
#line 15 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
           Write(Html.DisplayNameFor(model => model.BuyerName));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n            </th>\n            <th>\n                ");
#nullable restore
#line 18 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
           Write(Html.DisplayNameFor(model => model.ItemName));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n            </th>\n            <th>\n                ");
#nullable restore
#line 21 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
           Write(Html.DisplayNameFor(model => model.Quantity));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n            </th>\n            <th>\n                ");
#nullable restore
#line 24 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
           Write(Html.DisplayNameFor(model => model.Status));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n            </th>\n            <th></th>\n        </tr>\n    </thead>\n    <tbody>\n");
#nullable restore
#line 30 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
         foreach (var item in Model)
        {

#line default
#line hidden
#nullable disable
            WriteLiteral("<tr>\n    <td>\n        ");
#nullable restore
#line 34 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
   Write(Html.DisplayFor(modelItem => item.BuyerName));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n    </td>\n    <td>\n        ");
#nullable restore
#line 37 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
   Write(Html.DisplayFor(modelItem => item.ItemName));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n    </td>\n    <td>\n        ");
#nullable restore
#line 40 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
   Write(Html.DisplayFor(modelItem => item.Quantity));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n    </td>\n    <td>\n        ");
#nullable restore
#line 43 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
   Write(Html.DisplayFor(modelItem => item.Status));

#line default
#line hidden
#nullable disable
            WriteLiteral("\n    </td>\n    <td>\n        <input type=\"button\" id=\"btnAccept\" value=\"Accept\"");
            BeginWriteAttribute("orderId", " orderId=\"", 1249, "\"", 1272, 1);
#nullable restore
#line 46 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
WriteAttributeValue("", 1259, item.OrderId, 1259, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"btn btn-primary\" />\n        <input type=\"button\" id=\"btnReject\" value=\"Reject\"");
            BeginWriteAttribute("orderId", " orderId=\"", 1359, "\"", 1382, 1);
#nullable restore
#line 47 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
WriteAttributeValue("", 1369, item.OrderId, 1369, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"btn btn-primary\" />\n    </td>\n</tr>");
#nullable restore
#line 49 "D:\RohitGit\Shopper\Supplier\Views\Supplier\index.cshtml"
     }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    </tbody>
</table>


<script>

    $(document).ready(function ()
    {
        //Signal R Setup - Setting up our Binding our function App Url
        var signalRHubConnection = new signalR.HubConnectionBuilder()
            .withUrl(""https://processorderfunctionappdemo.azurewebsites.net/api"")
            .configureLogging(signalR.LogLevel.Information)
            .build();

        //Calls when signalR connection established
         signalRHubConnection.start().then(function () {
            console.log(""Signal R Connection Established Successfully"");
        });

        //Calls when buyer submit a new order/request. We will get the notifivation on supplier side
        //Here - ""newOrderSubmitted"", SignalR will look for this name on UI to send the notification
        // newOrderSubmitted - is setup in function app also as target for notification
        signalRHubConnection.on('newOrderSubmitted', function (orderDetails) {

            alert(orderDetails.BuyerName + "", Has submitted an order for item: ");
            WriteLiteral(@""" + orderDetails.ItemName + "". Kindly click on 'Refresh' to load the new orders."");

        });
            
        //Event bind - to refresh the current page, to load the new orders
        $(""#btnRefresh"").click(function () {
            window.location.href = window.location.href;        
            });

        //Event bind - When supplier accepts an order, We send the supplier response to buyer and remove that buyer order from UI
        $(""#btnAccept"").click(function () {
            var id = $(this).attr(""orderId"");
            SendSupplierResponse(id, 'Approved');
        });

         //Event bind - When supplier rejects an order, We send the supplier response to buyer and remove that buyer order from UI
        $(""#btnReject"").click(function () {
            var id = $(this).attr(""orderId"");
            SendSupplierResponse(id, 'Rejected');
        });

        //calling server method to update the order status as per supplier response
        function SendSupplierResponse(id, status) {
         ");
            WriteLiteral(@"   $.ajax({
                url: ""Supplier/SupplierResponse?orderId="" + id + ""&status="" + status,
                
                success: function (html) {
                    alert(""Notification sent to the buyer."");
                    window.location.href = window.location.href;  
                }
            });
    }


    })</script>



");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<Entities.ActiveOrder>> Html { get; private set; }
    }
}
#pragma warning restore 1591
